# 哈希表核心题型复习笔记
## 核心思路总览
哈希表（Python中`dict`/`set`）的核心价值是 **O(1)时间复杂度的查找/判断**，解决问题的关键是：通过“特征提取”或“存在性判断”，避免暴力遍历（O(n)查找），从而优化整体时间复杂度。

## 题型1：两数之和（哈希表解决“值→索引”反向查找）
### 题目核心
给定数组，找到和为目标值的两个元素的索引（元素不可重复使用）。

### 解题关键
- 正向遍历数组，用哈希表存储“元素值→索引”映射；
- 对每个元素`v`，判断`target - v`是否在哈希表中（O(1)查找），找到则返回索引对。

### 核心代码片段
```python
dic = {}
for i, v in enumerate(nums):
    if target - v in dic:
        return [dic[target - v], i]
    dic[v] = i  # 延迟存入，避免重复使用自身
```

### 易错点
- 不能先把所有元素存入哈希表，否则会出现“同一元素被多次使用”的问题；
- 哈希表存储“值→索引”，而非“索引→值”（数组已实现后者的O(1)查找）。

### 时间/空间复杂度
- 时间：O(n)（遍历一次数组，每次查找O(1)）；
- 空间：O(n)（哈希表最多存储n个元素）。

---

## 题型2：字母异位词分组（哈希表+特征提取分组）
### 题目核心
将由相同字母组成（顺序不同）的字符串归类，返回分组列表。

### 解题关键
- 字母异位词的共同特征：排序后字符串相同（或字符计数相同）；
- 用哈希表存储“特征key→异位词列表”，遍历字符串时按特征分组。

### 核心代码片段（排序特征法，简洁易记）
```python
from collections import defaultdict
dic = defaultdict(list)
for s in strs:
    key = ''.join(sorted(s))  # 特征提取：排序后的字符串
    dic[key].append(s)
return list(dic.values())
```

### 优化方案（字符计数法，更快）
```python
dic = {}
for s in strs:
    count = [0]*26  # 26个小写字母计数
    for c in s:
        count[ord(c)-ord('a')] += 1
    key = tuple(count)  # 列表不可哈希，转元组为key
    dic.setdefault(key, []).append(s)
return list(dic.values())
```

### 易错点
- 直接用`dic[key].append(s)`前，需确保key已初始化（用`defaultdict`或`setdefault`）；
- 排序特征法时间复杂度O(nk logk)（k为字符串长度），字符计数法O(nk)（更优）。

### 时间/空间复杂度
- 排序特征法：时间O(nk logk)，空间O(nk)（存储所有字符串）；
- 字符计数法：时间O(nk)，空间O(nk)。

---

## 题型3：最长连续序列（哈希表+起点/终点优化）
### 题目核心
未排序数组中，找出数字连续的最长序列长度（要求O(n)时间复杂度）。

### 解题关键
- 用集合（`set`）去重+O(1)查找，替代数组的O(n)查找；
- 核心优化：只从“序列起点”（`num-1`不在集合中）或“序列终点”（`num+1`不在集合中）开始统计，避免重复遍历。

### 核心代码片段（起点统计法）
```python
if not nums:
    return 0
num_set = set(nums)
max_len = 0
for num in num_set:
    if num - 1 not in num_set:  # 确认是序列起点
        cur_num = num
        cur_len = 1
        while cur_num + 1 in num_set:  # 向后统计连续长度
            cur_num += 1
            cur_len += 1
        max_len = max(max_len, cur_len)
return max_len
```

### 易错点
- 未去重会导致重复统计（如`[1,0,1,2]`），必须用`set`去重；
- 若不判断起点/终点，直接遍历每个元素统计，时间复杂度退化为O(n²)（超时）；
- 忽略空数组边界情况。

### 时间/空间复杂度
- 时间：O(n)（每个元素仅被统计一次）；
- 空间：O(n)（集合存储所有元素）。

---

## 哈希表高频用法总结
1. **`dict` vs `set` 选择**
   - 需存储“键值对”（如值→索引、特征→列表）：用`dict`；
   - 仅需判断元素存在性/去重：用`set`（更简洁、省空间）。
2. **创建方式效率**
   - 优先用`dic = {}`（字面量语法），比`dic = dict()`快（避免函数调用开销）；
   - `set`创建：`num_set = set(nums)`（直接转数组，高效去重）。
3. **避免KeyError技巧**
   - 用`dict.setdefault(key, 默认值)`（一行完成“判断+初始化”）；
   - 用`collections.defaultdict`（自动初始化不存在的key）。
4. **核心优化思想**
   - 特征提取：将“同类元素”映射为同一key（如异位词排序）；
   - 避免重复：通过“起点/终点判断”“延迟存入”等方式，减少无效操作。

要不要我帮你把这些笔记整理成**可打印的PDF格式**，或者补充每个题型的测试用例和易错点对比表格？
